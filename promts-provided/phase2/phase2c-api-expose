Feature: Task REST API (unauthenticated, DB-backed)

User journeys
1.1 Create a task via API
1.2 View all tasks via API
1.3 Update a task via API
1.4 Delete a task via API
1.5 Toggle a task complete/incomplete via API

Acceptance criteria
2.1 Backend exposes REST endpoints under /api/tasks
2.2 Endpoints implemented:
2.2.1 GET /api/tasks returns list of tasks
2.2.2 POST /api/tasks creates a task and returns it (201 or 200)
2.2.3 GET /api/tasks/{id} returns task details or 404
2.2.4 PUT /api/tasks/{id} updates title/description and returns updated task or 404
2.2.5 DELETE /api/tasks/{id} deletes task and returns success or 404
2.2.6 PATCH /api/tasks/{id}/complete toggles completion and returns updated task or 404
2.3 Validation rules:
2.3.1 Title is required and non-empty on create/update
2.3.2 Invalid payload returns 422
2.4 Errors are consistent: missing task returns 404 with a clear message
2.5 Uses SQLModel session dependency injection (clean separation: routes call service layer)

Success metrics
3.1 All pytest API tests pass (create/list/get/update/delete/toggle)
3.2 Coverage ≥80% for backend code touched in this step
3.3 Manual verification works via curl for at least:
3.3.1 POST /api/tasks then GET /api/tasks shows the created task


/prompts:sp.plan

Create: architecture sketch, interfaces, data model, error handling, requirements.
Decisions needing: list important choices with options and tradeoffs.
Testing strategy: unit + integration tests based on acceptance criteria.
Technical details:
- Use a simple, functional approach where it makes sense
- Follow TDD: write tests first, then implementation
- Organize code and tests according to your constitution rules

/sp.tasks

Break plan into small tasks (T001..), each ≤ 3 minutes, testable, reversible.
Add dependencies between tasks; group into phases; mark deliverables per task. Group tasks by operations and for each operation like add use TDD approach so RED Tests, Green Tests and Refactor. After each group we pause for human review and on approval commit to github.

Focus on:
- TDD approach (tests first for each operation)
- Small, step-by-step implementation
- Clear task dependencies
- Easy to undo changes

/sp.implement

Rules: tests first, smallest diff, keep public API stable within a phase.
After each task: run tests, update checklist, note deltas to spec if needed Mark completed tasks in tasks.md